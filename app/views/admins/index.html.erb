<% if flash.key?(:notice) %>
  <div class="alert alert-primary" role="alert"><%= notice %></div>
<% end %>

<table class="table">
  <thead class="thead-dark">
  <tr>
    <th>Admin</th>
    <th>Domains</th>
    <th>Active</th>
    <th>Edit</th>
    <% if @current_admin.super_admin? %>
      <th>Delete</th>
    <% end %>
    <th>Modified</th>
  </tr>
  </thead>
  <tbody>
  <% @admins.each do |admin| %>
    <% tr_class = admin.active? ? "" : "table-secondary" %>
    <tr class="<%= tr_class %>">
      <td><%= admin.username %></td>
      <td>
        <% if admin.super_admin? %>
          Super Admin
        <% else %>
          <%= admin.rel_domains.count %>
        <% end %>
      </td>
      <td><%= admin.active_str %></td>
      <td><%= link_to "Edit", edit_admin_path(admin),
                      role: "button", class: "btn btn-info btn-sm"%></td>
      <% if @current_admin.super_admin? %>
        <td>
          <% if @current_admin == admin %>
            <%= link_to "Delete", "", role: "button",
                        class: "btn btn-secondary btn-sm disabled",
                        "aria-disabled": "true" %>
          <% else %>
            <%= link_to "Delete", admin, method: :delete,
                        data: { confirm: 'Are you sure?' },
                        role: "button", class: "btn btn-secondary btn-sm" %>
          <% end %>
        </td>
      <% end %>
      <td><%= l admin.modified %></td>
    </tr>
  <% end %>
  </tbody>
</table>